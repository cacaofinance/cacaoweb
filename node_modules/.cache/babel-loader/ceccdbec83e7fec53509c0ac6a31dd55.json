{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Matias/Downloads/svy final/SPreace-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Matias/Downloads/svy final/SPreace-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useCallback}from'react';import{useWeb3React,UnsupportedChainIdError}from'@web3-react/core';import{useToast}from'state/hooks';import{connectorsByName}from'utils/web3React';import{setupNetwork}from'utils/wallet';var useAuth=function useAuth(){var _useWeb3React=useWeb3React(),activate=_useWeb3React.activate,deactivate=_useWeb3React.deactivate;var _useToast=useToast(),toastError=_useToast.toastError;var login=useCallback(function(connectorID){var connector=connectorsByName[connectorID];if(connector){activate(connector,/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(error){var hasSetup;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(error instanceof UnsupportedChainIdError)){_context.next=7;break;}_context.next=3;return setupNetwork();case 3:hasSetup=_context.sent;if(hasSetup){activate(connector);}_context.next=8;break;case 7:toastError(error.name,error.message);case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}else{toastError(\"Can't find connector\",'The connector config is wrong');}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return{login:login,logout:deactivate};};export default useAuth;","map":{"version":3,"sources":["C:/Users/Matias/Downloads/svy final/SPreace-frontend/src/hooks/useAuth.ts"],"names":["useCallback","useWeb3React","UnsupportedChainIdError","useToast","connectorsByName","setupNetwork","useAuth","activate","deactivate","toastError","login","connectorID","connector","error","hasSetup","name","message","logout"],"mappings":"mVAAA,OAASA,WAAT,KAA4B,OAA5B,CACA,OAASC,YAAT,CAAuBC,uBAAvB,KAAsD,kBAAtD,CAEA,OAASC,QAAT,KAAyB,aAAzB,CACA,OAASC,gBAAT,KAAiC,iBAAjC,CACA,OAASC,YAAT,KAA6B,cAA7B,CAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,mBACaL,YAAY,EADzB,CACZM,QADY,eACZA,QADY,CACFC,UADE,eACFA,UADE,eAEGL,QAAQ,EAFX,CAEZM,UAFY,WAEZA,UAFY,CAIpB,GAAMC,CAAAA,KAAK,CAAGV,WAAW,CAAC,SAACW,WAAD,CAAiC,CACzD,GAAMC,CAAAA,SAAS,CAAGR,gBAAgB,CAACO,WAAD,CAAlC,CACA,GAAIC,SAAJ,CAAe,CACbL,QAAQ,CAACK,SAAD,0FAAY,iBAAOC,KAAP,oIACdA,KAAK,WAAYX,CAAAA,uBADH,gDAEOG,CAAAA,YAAY,EAFnB,QAEVS,QAFU,eAGhB,GAAIA,QAAJ,CAAc,CACZP,QAAQ,CAACK,SAAD,CAAR,CACD,CALe,6BAOhBH,UAAU,CAACI,KAAK,CAACE,IAAP,CAAaF,KAAK,CAACG,OAAnB,CAAV,CAPgB,sDAAZ,+DAAR,CAUD,CAXD,IAWO,CACLP,UAAU,CAAC,sBAAD,CAAyB,+BAAzB,CAAV,CACD,CACD;AACD,CAjBwB,CAiBtB,EAjBsB,CAAzB,CAmBA,MAAO,CAAEC,KAAK,CAALA,KAAF,CAASO,MAAM,CAAET,UAAjB,CAAP,CACD,CAxBD,CA0BA,cAAeF,CAAAA,OAAf","sourcesContent":["import { useCallback } from 'react'\r\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\r\nimport { ConnectorNames } from '@pancakeswap-libs/uikit'\r\nimport { useToast } from 'state/hooks'\r\nimport { connectorsByName } from 'utils/web3React'\r\nimport { setupNetwork } from 'utils/wallet'\r\n\r\nconst useAuth = () => {\r\n  const { activate, deactivate } = useWeb3React()\r\n  const { toastError } = useToast()\r\n\r\n  const login = useCallback((connectorID: ConnectorNames) => {\r\n    const connector = connectorsByName[connectorID]\r\n    if (connector) {\r\n      activate(connector, async (error: Error) => {\r\n        if (error instanceof UnsupportedChainIdError) {\r\n          const hasSetup = await setupNetwork()\r\n          if (hasSetup) {\r\n            activate(connector)\r\n          }\r\n        } else {\r\n          toastError(error.name, error.message)\r\n        }\r\n      })\r\n    } else {\r\n      toastError(\"Can't find connector\", 'The connector config is wrong')\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  return { login, logout: deactivate }\r\n}\r\n\r\nexport default useAuth\r\n"]},"metadata":{},"sourceType":"module"}