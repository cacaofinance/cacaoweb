{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Matias/Downloads/svy final/SPreace-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Matias/Downloads/svy final/SPreace-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useEffect,useMemo}from'react';import BigNumber from'bignumber.js';import{kebabCase}from'lodash';import{useWeb3React}from'@web3-react/core';import{toastTypes}from'@pancakeswap-libs/uikit';import{useSelector,useDispatch}from'react-redux';import{getWeb3NoAccount}from'utils/web3';import useRefresh from'hooks/useRefresh';import{fetchFarmsPublicDataAsync,fetchPoolsPublicDataAsync,fetchPoolsUserDataAsync,push as pushToast,remove as removeToast,clear as clearToast,setBlock}from'./actions';import{fetchProfile}from'./profile';import{fetchTeam,fetchTeams}from'./teams';import{fetchAchievements}from'./achievements';import{fetchPrices}from'./prices';var ZERO=new BigNumber(0);export var useFetchPublicData=function useFetchPublicData(){var dispatch=useDispatch();var _useRefresh=useRefresh(),slowRefresh=_useRefresh.slowRefresh;useEffect(function(){dispatch(fetchFarmsPublicDataAsync());dispatch(fetchPoolsPublicDataAsync());},[dispatch,slowRefresh]);useEffect(function(){var web3=getWeb3NoAccount();var interval=setInterval(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var blockNumber;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return web3.eth.getBlockNumber();case 2:blockNumber=_context.sent;dispatch(setBlock(blockNumber));case 4:case\"end\":return _context.stop();}}},_callee);})),6000);return function(){return clearInterval(interval);};},[dispatch]);};// Farms\nexport var useFarms=function useFarms(){var farms=useSelector(function(state){return state.farms.data;});return farms;};export var useFarmFromPid=function useFarmFromPid(pid){var farm=useSelector(function(state){return state.farms.data.find(function(f){return f.pid===pid;});});return farm;};export var useFarmFromSymbol=function useFarmFromSymbol(lpSymbol){var farm=useSelector(function(state){return state.farms.data.find(function(f){return f.lpSymbol===lpSymbol;});});return farm;};export var useFarmUser=function useFarmUser(pid){var farm=useFarmFromPid(pid);return{allowance:farm.userData?new BigNumber(farm.userData.allowance):new BigNumber(0),tokenBalance:farm.userData?new BigNumber(farm.userData.tokenBalance):new BigNumber(0),stakedBalance:farm.userData?new BigNumber(farm.userData.stakedBalance):new BigNumber(0),earnings:farm.userData?new BigNumber(farm.userData.earnings):new BigNumber(0)};};// Pools\nexport var usePools=function usePools(account){var _useRefresh2=useRefresh(),fastRefresh=_useRefresh2.fastRefresh;var dispatch=useDispatch();useEffect(function(){if(account){dispatch(fetchPoolsUserDataAsync(account));}},[account,dispatch,fastRefresh]);var pools=useSelector(function(state){return state.pools.data;});return pools;};export var usePoolFromPid=function usePoolFromPid(sousId){var pool=useSelector(function(state){return state.pools.data.find(function(p){return p.sousId===sousId;});});return pool;};// Prices\nexport var usePriceBnbBusd=function usePriceBnbBusd(){var pid=3;// BUSD-BNB LP\nvar farm=useFarmFromPid(pid);return farm.tokenPriceVsQuote?new BigNumber(1).div(farm.tokenPriceVsQuote):ZERO;};export var usePriceCakeBusd=function usePriceCakeBusd(){var pid=1;// CAKE-BNB LP\nvar bnbPriceUSD=usePriceBnbBusd();var farm=useFarmFromPid(pid);return farm.tokenPriceVsQuote?bnbPriceUSD.times(farm.tokenPriceVsQuote):ZERO;};export var usePriceEthBusd=function usePriceEthBusd(){var pid=4;// ETH-BNB LP\nvar bnbPriceUSD=usePriceBnbBusd();var farm=useFarmFromPid(pid);return farm.tokenPriceVsQuote?bnbPriceUSD.times(farm.tokenPriceVsQuote):ZERO;};// Toasts\nexport var useToast=function useToast(){var dispatch=useDispatch();var helpers=useMemo(function(){var push=function push(toast){return dispatch(pushToast(toast));};return{toastError:function toastError(title,description){return push({id:kebabCase(title),type:toastTypes.DANGER,title:title,description:description});},toastInfo:function toastInfo(title,description){return push({id:kebabCase(title),type:toastTypes.INFO,title:title,description:description});},toastSuccess:function toastSuccess(title,description){return push({id:kebabCase(title),type:toastTypes.SUCCESS,title:title,description:description});},toastWarning:function toastWarning(title,description){return push({id:kebabCase(title),type:toastTypes.WARNING,title:title,description:description});},push:push,remove:function remove(id){return dispatch(removeToast(id));},clear:function clear(){return dispatch(clearToast());}};},[dispatch]);return helpers;};// Profile\nexport var useFetchProfile=function useFetchProfile(){var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var dispatch=useDispatch();useEffect(function(){dispatch(fetchProfile(account));},[account,dispatch]);};export var useProfile=function useProfile(){var _useSelector=useSelector(function(state){return state.profile;}),isInitialized=_useSelector.isInitialized,isLoading=_useSelector.isLoading,data=_useSelector.data,hasRegistered=_useSelector.hasRegistered;return{profile:data,hasProfile:isInitialized&&hasRegistered,isInitialized:isInitialized,isLoading:isLoading};};// Teams\nexport var useTeam=function useTeam(id){var team=useSelector(function(state){return state.teams.data[id];});var dispatch=useDispatch();useEffect(function(){dispatch(fetchTeam(id));},[id,dispatch]);return team;};export var useTeams=function useTeams(){var _useSelector2=useSelector(function(state){return state.teams;}),isInitialized=_useSelector2.isInitialized,isLoading=_useSelector2.isLoading,data=_useSelector2.data;var dispatch=useDispatch();useEffect(function(){dispatch(fetchTeams());},[dispatch]);return{teams:data,isInitialized:isInitialized,isLoading:isLoading};};// Achievements\nexport var useFetchAchievements=function useFetchAchievements(){var _useWeb3React2=useWeb3React(),account=_useWeb3React2.account;var dispatch=useDispatch();useEffect(function(){if(account){dispatch(fetchAchievements(account));}},[account,dispatch]);};export var useAchievements=function useAchievements(){var achievements=useSelector(function(state){return state.achievements.data;});return achievements;};// Prices\nexport var useFetchPriceList=function useFetchPriceList(){var _useRefresh3=useRefresh(),slowRefresh=_useRefresh3.slowRefresh;var dispatch=useDispatch();useEffect(function(){dispatch(fetchPrices());},[dispatch,slowRefresh]);};export var useGetApiPrices=function useGetApiPrices(){var prices=useSelector(function(state){return state.prices.data;});return prices;};export var useGetApiPrice=function useGetApiPrice(token){var prices=useGetApiPrices();if(!prices){return null;}return prices[token.toLowerCase()];};// Block\nexport var useBlock=function useBlock(){return useSelector(function(state){return state.block;});};","map":{"version":3,"sources":["C:/Users/Matias/Downloads/svy final/SPreace-frontend/src/state/hooks.ts"],"names":["useEffect","useMemo","BigNumber","kebabCase","useWeb3React","toastTypes","useSelector","useDispatch","getWeb3NoAccount","useRefresh","fetchFarmsPublicDataAsync","fetchPoolsPublicDataAsync","fetchPoolsUserDataAsync","push","pushToast","remove","removeToast","clear","clearToast","setBlock","fetchProfile","fetchTeam","fetchTeams","fetchAchievements","fetchPrices","ZERO","useFetchPublicData","dispatch","slowRefresh","web3","interval","setInterval","eth","getBlockNumber","blockNumber","clearInterval","useFarms","farms","state","data","useFarmFromPid","pid","farm","find","f","useFarmFromSymbol","lpSymbol","useFarmUser","allowance","userData","tokenBalance","stakedBalance","earnings","usePools","account","fastRefresh","pools","usePoolFromPid","sousId","pool","p","usePriceBnbBusd","tokenPriceVsQuote","div","usePriceCakeBusd","bnbPriceUSD","times","usePriceEthBusd","useToast","helpers","toast","toastError","title","description","id","type","DANGER","toastInfo","INFO","toastSuccess","SUCCESS","toastWarning","WARNING","useFetchProfile","useProfile","profile","isInitialized","isLoading","hasRegistered","hasProfile","useTeam","team","teams","useTeams","useFetchAchievements","useAchievements","achievements","useFetchPriceList","useGetApiPrices","prices","useGetApiPrice","token","toLowerCase","useBlock","block"],"mappings":"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","sourcesContent":["import { useEffect, useMemo } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { kebabCase } from 'lodash'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Toast, toastTypes } from '@pancakeswap-libs/uikit'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { Team } from 'config/constants/types'\r\nimport { getWeb3NoAccount } from 'utils/web3'\r\nimport useRefresh from 'hooks/useRefresh'\r\nimport {\r\n  fetchFarmsPublicDataAsync,\r\n  fetchPoolsPublicDataAsync,\r\n  fetchPoolsUserDataAsync,\r\n  push as pushToast,\r\n  remove as removeToast,\r\n  clear as clearToast,\r\n  setBlock,\r\n} from './actions'\r\nimport { State, Farm, Pool, Block, ProfileState, TeamsState, AchievementState, PriceState } from './types'\r\nimport { fetchProfile } from './profile'\r\nimport { fetchTeam, fetchTeams } from './teams'\r\nimport { fetchAchievements } from './achievements'\r\nimport { fetchPrices } from './prices'\r\n\r\nconst ZERO = new BigNumber(0)\r\n\r\nexport const useFetchPublicData = () => {\r\n  const dispatch = useDispatch()\r\n  const { slowRefresh } = useRefresh()\r\n  useEffect(() => {\r\n    dispatch(fetchFarmsPublicDataAsync())\r\n    dispatch(fetchPoolsPublicDataAsync())\r\n  }, [dispatch, slowRefresh])\r\n\r\n  useEffect(() => {\r\n    const web3 = getWeb3NoAccount()\r\n    const interval = setInterval(async () => {\r\n      const blockNumber = await web3.eth.getBlockNumber()\r\n      dispatch(setBlock(blockNumber))\r\n    }, 6000)\r\n\r\n    return () => clearInterval(interval)\r\n  }, [dispatch])\r\n}\r\n\r\n// Farms\r\n\r\nexport const useFarms = (): Farm[] => {\r\n  const farms = useSelector((state: State) => state.farms.data)\r\n  return farms\r\n}\r\n\r\nexport const useFarmFromPid = (pid): Farm => {\r\n  const farm = useSelector((state: State) => state.farms.data.find((f) => f.pid === pid))\r\n  return farm\r\n}\r\n\r\nexport const useFarmFromSymbol = (lpSymbol: string): Farm => {\r\n  const farm = useSelector((state: State) => state.farms.data.find((f) => f.lpSymbol === lpSymbol))\r\n  return farm\r\n}\r\n\r\nexport const useFarmUser = (pid) => {\r\n  const farm = useFarmFromPid(pid)\r\n\r\n  return {\r\n    allowance: farm.userData ? new BigNumber(farm.userData.allowance) : new BigNumber(0),\r\n    tokenBalance: farm.userData ? new BigNumber(farm.userData.tokenBalance) : new BigNumber(0),\r\n    stakedBalance: farm.userData ? new BigNumber(farm.userData.stakedBalance) : new BigNumber(0),\r\n    earnings: farm.userData ? new BigNumber(farm.userData.earnings) : new BigNumber(0),\r\n  }\r\n}\r\n\r\n// Pools\r\n\r\nexport const usePools = (account): Pool[] => {\r\n  const { fastRefresh } = useRefresh()\r\n  const dispatch = useDispatch()\r\n  useEffect(() => {\r\n    if (account) {\r\n      dispatch(fetchPoolsUserDataAsync(account))\r\n    }\r\n  }, [account, dispatch, fastRefresh])\r\n\r\n  const pools = useSelector((state: State) => state.pools.data)\r\n  return pools\r\n}\r\n\r\nexport const usePoolFromPid = (sousId): Pool => {\r\n  const pool = useSelector((state: State) => state.pools.data.find((p) => p.sousId === sousId))\r\n  return pool\r\n}\r\n\r\n// Prices\r\n\r\nexport const usePriceBnbBusd = (): BigNumber => {\r\n  const pid = 3 // BUSD-BNB LP\r\n  const farm = useFarmFromPid(pid)\r\n  return farm.tokenPriceVsQuote ? new BigNumber(1).div(farm.tokenPriceVsQuote) : ZERO\r\n}\r\n\r\nexport const usePriceCakeBusd = (): BigNumber => {\r\n  const pid = 1 // CAKE-BNB LP\r\n  const bnbPriceUSD = usePriceBnbBusd()\r\n  const farm = useFarmFromPid(pid)\r\n  return farm.tokenPriceVsQuote ? bnbPriceUSD.times(farm.tokenPriceVsQuote) : ZERO\r\n}\r\n\r\nexport const usePriceEthBusd = (): BigNumber => {\r\n  const pid = 4 // ETH-BNB LP\r\n  const bnbPriceUSD = usePriceBnbBusd()\r\n  const farm = useFarmFromPid(pid)\r\n  return farm.tokenPriceVsQuote ? bnbPriceUSD.times(farm.tokenPriceVsQuote) : ZERO\r\n}\r\n\r\n// Toasts\r\nexport const useToast = () => {\r\n  const dispatch = useDispatch()\r\n  const helpers = useMemo(() => {\r\n    const push = (toast: Toast) => dispatch(pushToast(toast))\r\n\r\n    return {\r\n      toastError: (title: string, description?: string) => {\r\n        return push({ id: kebabCase(title), type: toastTypes.DANGER, title, description })\r\n      },\r\n      toastInfo: (title: string, description?: string) => {\r\n        return push({ id: kebabCase(title), type: toastTypes.INFO, title, description })\r\n      },\r\n      toastSuccess: (title: string, description?: string) => {\r\n        return push({ id: kebabCase(title), type: toastTypes.SUCCESS, title, description })\r\n      },\r\n      toastWarning: (title: string, description?: string) => {\r\n        return push({ id: kebabCase(title), type: toastTypes.WARNING, title, description })\r\n      },\r\n      push,\r\n      remove: (id: string) => dispatch(removeToast(id)),\r\n      clear: () => dispatch(clearToast()),\r\n    }\r\n  }, [dispatch])\r\n\r\n  return helpers\r\n}\r\n\r\n// Profile\r\n\r\nexport const useFetchProfile = () => {\r\n  const { account } = useWeb3React()\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchProfile(account))\r\n  }, [account, dispatch])\r\n}\r\n\r\nexport const useProfile = () => {\r\n  const { isInitialized, isLoading, data, hasRegistered }: ProfileState = useSelector((state: State) => state.profile)\r\n  return { profile: data, hasProfile: isInitialized && hasRegistered, isInitialized, isLoading }\r\n}\r\n\r\n// Teams\r\n\r\nexport const useTeam = (id: number) => {\r\n  const team: Team = useSelector((state: State) => state.teams.data[id])\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchTeam(id))\r\n  }, [id, dispatch])\r\n\r\n  return team\r\n}\r\n\r\nexport const useTeams = () => {\r\n  const { isInitialized, isLoading, data }: TeamsState = useSelector((state: State) => state.teams)\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchTeams())\r\n  }, [dispatch])\r\n\r\n  return { teams: data, isInitialized, isLoading }\r\n}\r\n\r\n// Achievements\r\n\r\nexport const useFetchAchievements = () => {\r\n  const { account } = useWeb3React()\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    if (account) {\r\n      dispatch(fetchAchievements(account))\r\n    }\r\n  }, [account, dispatch])\r\n}\r\n\r\nexport const useAchievements = () => {\r\n  const achievements: AchievementState['data'] = useSelector((state: State) => state.achievements.data)\r\n  return achievements\r\n}\r\n\r\n// Prices\r\nexport const useFetchPriceList = () => {\r\n  const { slowRefresh } = useRefresh()\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchPrices())\r\n  }, [dispatch, slowRefresh])\r\n}\r\n\r\nexport const useGetApiPrices = () => {\r\n  const prices: PriceState['data'] = useSelector((state: State) => state.prices.data)\r\n  return prices\r\n}\r\n\r\nexport const useGetApiPrice = (token: string) => {\r\n  const prices = useGetApiPrices()\r\n\r\n  if (!prices) {\r\n    return null\r\n  }\r\n\r\n  return prices[token.toLowerCase()]\r\n}\r\n\r\n// Block\r\nexport const useBlock = (): Block => {\r\n  return useSelector((state: State) => state.block)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}