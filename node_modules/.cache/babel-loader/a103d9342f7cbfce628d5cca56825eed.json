{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatErrorMessage = exports.formatJsonRpcError = exports.formatJsonRpcResult = exports.formatJsonRpcRequest = exports.payloadId = void 0;\n\nvar error_1 = require(\"./error\");\n\nvar constants_1 = require(\"./constants\");\n\nfunction payloadId() {\n  var date = Date.now() * Math.pow(10, 3);\n  var extra = Math.floor(Math.random() * Math.pow(10, 3));\n  return date + extra;\n}\n\nexports.payloadId = payloadId;\n\nfunction formatJsonRpcRequest(method, params, id) {\n  return {\n    id: id || payloadId(),\n    jsonrpc: \"2.0\",\n    method: method,\n    params: params\n  };\n}\n\nexports.formatJsonRpcRequest = formatJsonRpcRequest;\n\nfunction formatJsonRpcResult(id, result) {\n  return {\n    id: id,\n    jsonrpc: \"2.0\",\n    result: result\n  };\n}\n\nexports.formatJsonRpcResult = formatJsonRpcResult;\n\nfunction formatJsonRpcError(id, error) {\n  return {\n    id: id,\n    jsonrpc: \"2.0\",\n    error: formatErrorMessage(error)\n  };\n}\n\nexports.formatJsonRpcError = formatJsonRpcError;\n\nfunction formatErrorMessage(error) {\n  if (typeof error === \"undefined\") {\n    return error_1.getError(constants_1.INTERNAL_ERROR);\n  }\n\n  if (typeof error === \"string\") {\n    error = Object.assign(Object.assign({}, error_1.getError(constants_1.SERVER_ERROR)), {\n      message: error\n    });\n  }\n\n  if (error_1.isReservedErrorCode(error.code)) {\n    error = error_1.getErrorByCode(error.code);\n  }\n\n  if (!error_1.isServerErrorCode(error.code)) {\n    throw new Error(\"Error code is not in server code range\");\n  }\n\n  return error;\n}\n\nexports.formatErrorMessage = formatErrorMessage;","map":{"version":3,"sources":["../../src/format.ts"],"names":[],"mappings":";;;;;;;AAAA,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAMA,IAAA,WAAA,GAAA,OAAA,CAAA,aAAA,CAAA;;AAQA,SAAgB,SAAhB,GAAyB;AACvB,MAAM,IAAI,GAAG,IAAI,CAAC,GAAL,KAAa,IAAI,CAAC,GAAL,CAAS,EAAT,EAAa,CAAb,CAA1B;AACA,MAAM,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,IAAI,CAAC,GAAL,CAAS,EAAT,EAAa,CAAb,CAA3B,CAAd;AACA,SAAO,IAAI,GAAG,KAAd;AACD;;AAJD,OAAA,CAAA,SAAA,GAAA,SAAA;;AAMA,SAAgB,oBAAhB,CACE,MADF,EAEE,MAFF,EAGE,EAHF,EAGa;AAEX,SAAO;AACL,IAAA,EAAE,EAAE,EAAE,IAAI,SAAS,EADd;AAEL,IAAA,OAAO,EAAE,KAFJ;AAGL,IAAA,MAAM,EAAN,MAHK;AAIL,IAAA,MAAM,EAAN;AAJK,GAAP;AAMD;;AAXD,OAAA,CAAA,oBAAA,GAAA,oBAAA;;AAaA,SAAgB,mBAAhB,CACE,EADF,EAEE,MAFF,EAEW;AAET,SAAO;AACL,IAAA,EAAE,EAAF,EADK;AAEL,IAAA,OAAO,EAAE,KAFJ;AAGL,IAAA,MAAM,EAAN;AAHK,GAAP;AAKD;;AATD,OAAA,CAAA,mBAAA,GAAA,mBAAA;;AAWA,SAAgB,kBAAhB,CACE,EADF,EAEE,KAFF,EAEgC;AAE9B,SAAO;AACL,IAAA,EAAE,EAAF,EADK;AAEL,IAAA,OAAO,EAAE,KAFJ;AAGL,IAAA,KAAK,EAAE,kBAAkB,CAAC,KAAD;AAHpB,GAAP;AAKD;;AATD,OAAA,CAAA,kBAAA,GAAA,kBAAA;;AAWA,SAAgB,kBAAhB,CACE,KADF,EACgC;AAE9B,MAAI,OAAO,KAAP,KAAiB,WAArB,EAAkC;AAChC,WAAO,OAAA,CAAA,QAAA,CAAS,WAAA,CAAA,cAAT,CAAP;AACD;;AACD,MAAI,OAAO,KAAP,KAAiB,QAArB,EAA+B;AAC7B,IAAA,KAAK,GAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACA,OAAA,CAAA,QAAA,CAAS,WAAA,CAAA,YAAT,CADA,CAAA,EACsB;AACzB,MAAA,OAAO,EAAE;AADgB,KADtB,CAAL;AAID;;AACD,MAAI,OAAA,CAAA,mBAAA,CAAoB,KAAK,CAAC,IAA1B,CAAJ,EAAqC;AACnC,IAAA,KAAK,GAAG,OAAA,CAAA,cAAA,CAAe,KAAK,CAAC,IAArB,CAAR;AACD;;AACD,MAAI,CAAC,OAAA,CAAA,iBAAA,CAAkB,KAAK,CAAC,IAAxB,CAAL,EAAoC;AAClC,UAAM,IAAI,KAAJ,CAAU,wCAAV,CAAN;AACD;;AACD,SAAO,KAAP;AACD;;AAnBD,OAAA,CAAA,kBAAA,GAAA,kBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.formatErrorMessage = exports.formatJsonRpcError = exports.formatJsonRpcResult = exports.formatJsonRpcRequest = exports.payloadId = void 0;\r\nconst error_1 = require(\"./error\");\r\nconst constants_1 = require(\"./constants\");\r\nfunction payloadId() {\r\n    const date = Date.now() * Math.pow(10, 3);\r\n    const extra = Math.floor(Math.random() * Math.pow(10, 3));\r\n    return date + extra;\r\n}\r\nexports.payloadId = payloadId;\r\nfunction formatJsonRpcRequest(method, params, id) {\r\n    return {\r\n        id: id || payloadId(),\r\n        jsonrpc: \"2.0\",\r\n        method,\r\n        params,\r\n    };\r\n}\r\nexports.formatJsonRpcRequest = formatJsonRpcRequest;\r\nfunction formatJsonRpcResult(id, result) {\r\n    return {\r\n        id,\r\n        jsonrpc: \"2.0\",\r\n        result,\r\n    };\r\n}\r\nexports.formatJsonRpcResult = formatJsonRpcResult;\r\nfunction formatJsonRpcError(id, error) {\r\n    return {\r\n        id,\r\n        jsonrpc: \"2.0\",\r\n        error: formatErrorMessage(error),\r\n    };\r\n}\r\nexports.formatJsonRpcError = formatJsonRpcError;\r\nfunction formatErrorMessage(error) {\r\n    if (typeof error === \"undefined\") {\r\n        return error_1.getError(constants_1.INTERNAL_ERROR);\r\n    }\r\n    if (typeof error === \"string\") {\r\n        error = Object.assign(Object.assign({}, error_1.getError(constants_1.SERVER_ERROR)), { message: error });\r\n    }\r\n    if (error_1.isReservedErrorCode(error.code)) {\r\n        error = error_1.getErrorByCode(error.code);\r\n    }\r\n    if (!error_1.isServerErrorCode(error.code)) {\r\n        throw new Error(\"Error code is not in server code range\");\r\n    }\r\n    return error;\r\n}\r\nexports.formatErrorMessage = formatErrorMessage;\r\n//# sourceMappingURL=format.js.map"]},"metadata":{},"sourceType":"script"}