{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Matias/Downloads/svy final/SPreace-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Matias/Downloads/svy final/SPreace-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";/* eslint-disable no-param-reassign */import{createSlice}from'@reduxjs/toolkit';import getProfile from'./getProfile';var initialState={isInitialized:false,isLoading:true,hasRegistered:false,data:null};export var profileSlice=createSlice({name:'profile',initialState:initialState,reducers:{profileFetchStart:function profileFetchStart(state){state.isLoading=true;},profileFetchSucceeded:function profileFetchSucceeded(state,action){var _action$payload=action.payload,profile=_action$payload.profile,hasRegistered=_action$payload.hasRegistered;return{isInitialized:true,isLoading:false,hasRegistered:hasRegistered,data:profile};},profileFetchFailed:function profileFetchFailed(state){state.isLoading=false;state.isInitialized=true;},addPoints:function addPoints(state,action){state.data.points+=action.payload;}}});// Actions\nvar _profileSlice$actions=profileSlice.actions,profileFetchStart=_profileSlice$actions.profileFetchStart,profileFetchSucceeded=_profileSlice$actions.profileFetchSucceeded,profileFetchFailed=_profileSlice$actions.profileFetchFailed,addPoints=_profileSlice$actions.addPoints;// Thunks\nexport{profileFetchStart,profileFetchSucceeded,profileFetchFailed,addPoints};export var fetchProfile=function fetchProfile(address){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch(profileFetchStart());_context.next=4;return getProfile(address);case 4:response=_context.sent;dispatch(profileFetchSucceeded(response));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);dispatch(profileFetchFailed());case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export default profileSlice.reducer;","map":{"version":3,"sources":["C:/Users/Matias/Downloads/svy final/SPreace-frontend/src/state/profile/index.tsx"],"names":["createSlice","getProfile","initialState","isInitialized","isLoading","hasRegistered","data","profileSlice","name","reducers","profileFetchStart","state","profileFetchSucceeded","action","payload","profile","profileFetchFailed","addPoints","points","actions","fetchProfile","address","dispatch","response","reducer"],"mappings":"mVAAA,sCACA,OAASA,WAAT,KAA2C,kBAA3C,CAEA,MAAOC,CAAAA,UAAP,KAA+C,cAA/C,CAEA,GAAMC,CAAAA,YAA0B,CAAG,CACjCC,aAAa,CAAE,KADkB,CAEjCC,SAAS,CAAE,IAFsB,CAGjCC,aAAa,CAAE,KAHkB,CAIjCC,IAAI,CAAE,IAJ2B,CAAnC,CAOA,MAAO,IAAMC,CAAAA,YAAY,CAAGP,WAAW,CAAC,CACtCQ,IAAI,CAAE,SADgC,CAEtCN,YAAY,CAAZA,YAFsC,CAGtCO,QAAQ,CAAE,CACRC,iBAAiB,CAAE,2BAACC,KAAD,CAAW,CAC5BA,KAAK,CAACP,SAAN,CAAkB,IAAlB,CACD,CAHO,CAIRQ,qBAAqB,CAAE,+BAACD,KAAD,CAAQE,MAAR,CAAsD,qBACxCA,MAAM,CAACC,OADiC,CACnEC,OADmE,iBACnEA,OADmE,CAC1DV,aAD0D,iBAC1DA,aAD0D,CAG3E,MAAO,CACLF,aAAa,CAAE,IADV,CAELC,SAAS,CAAE,KAFN,CAGLC,aAAa,CAAbA,aAHK,CAILC,IAAI,CAAES,OAJD,CAAP,CAMD,CAbO,CAcRC,kBAAkB,CAAE,4BAACL,KAAD,CAAW,CAC7BA,KAAK,CAACP,SAAN,CAAkB,KAAlB,CACAO,KAAK,CAACR,aAAN,CAAsB,IAAtB,CACD,CAjBO,CAkBRc,SAAS,CAAE,mBAACN,KAAD,CAAQE,MAAR,CAA0C,CACnDF,KAAK,CAACL,IAAN,CAAWY,MAAX,EAAqBL,MAAM,CAACC,OAA5B,CACD,CApBO,CAH4B,CAAD,CAAhC,CA2BP;0BAC2FP,YAAY,CAACY,O,CAAzFT,iB,uBAAAA,iB,CAAmBE,qB,uBAAAA,qB,CAAuBI,kB,uBAAAA,kB,CAAoBC,S,uBAAAA,S,CAE7E;6EACA,MAAO,IAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,OAAD,iGAAqB,iBAAOC,QAAP,+IAE7CA,QAAQ,CAACZ,iBAAiB,EAAlB,CAAR,CAF6C,sBAGtBT,CAAAA,UAAU,CAACoB,OAAD,CAHY,QAGvCE,QAHuC,eAI7CD,QAAQ,CAACV,qBAAqB,CAACW,QAAD,CAAtB,CAAR,CAJ6C,+EAM7CD,QAAQ,CAACN,kBAAkB,EAAnB,CAAR,CAN6C,oEAArB,gEAArB,CAUP,cAAeT,CAAAA,YAAY,CAACiB,OAA5B","sourcesContent":["/* eslint-disable no-param-reassign */\r\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit'\r\nimport { ProfileState } from 'state/types'\r\nimport getProfile, { GetProfileResponse } from './getProfile'\r\n\r\nconst initialState: ProfileState = {\r\n  isInitialized: false,\r\n  isLoading: true,\r\n  hasRegistered: false,\r\n  data: null,\r\n}\r\n\r\nexport const profileSlice = createSlice({\r\n  name: 'profile',\r\n  initialState,\r\n  reducers: {\r\n    profileFetchStart: (state) => {\r\n      state.isLoading = true\r\n    },\r\n    profileFetchSucceeded: (state, action: PayloadAction<GetProfileResponse>) => {\r\n      const { profile, hasRegistered } = action.payload\r\n\r\n      return {\r\n        isInitialized: true,\r\n        isLoading: false,\r\n        hasRegistered,\r\n        data: profile,\r\n      }\r\n    },\r\n    profileFetchFailed: (state) => {\r\n      state.isLoading = false\r\n      state.isInitialized = true\r\n    },\r\n    addPoints: (state, action: PayloadAction<number>) => {\r\n      state.data.points += action.payload\r\n    },\r\n  },\r\n})\r\n\r\n// Actions\r\nexport const { profileFetchStart, profileFetchSucceeded, profileFetchFailed, addPoints } = profileSlice.actions\r\n\r\n// Thunks\r\nexport const fetchProfile = (address: string) => async (dispatch) => {\r\n  try {\r\n    dispatch(profileFetchStart())\r\n    const response = await getProfile(address)\r\n    dispatch(profileFetchSucceeded(response))\r\n  } catch (error) {\r\n    dispatch(profileFetchFailed())\r\n  }\r\n}\r\n\r\nexport default profileSlice.reducer\r\n"]},"metadata":{},"sourceType":"module"}