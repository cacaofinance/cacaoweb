{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"C:/Users/Matias/Downloads/new/svy.finance/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:/Users/Matias/Downloads/new/svy.finance/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar utils_1 = require(\"@walletconnect/utils\");\n\nvar EventManager = /*#__PURE__*/function () {\n  function EventManager() {\n    _classCallCheck(this, EventManager);\n\n    this._eventEmitters = [];\n  }\n\n  _createClass(EventManager, [{\n    key: \"subscribe\",\n    value: function subscribe(eventEmitter) {\n      this._eventEmitters.push(eventEmitter);\n    }\n  }, {\n    key: \"trigger\",\n    value: function trigger(payload) {\n      var eventEmitters = [];\n      var event;\n\n      if (utils_1.isJsonRpcRequest(payload)) {\n        event = payload.method;\n      } else if (utils_1.isJsonRpcResponseSuccess(payload) || utils_1.isJsonRpcResponseError(payload)) {\n        event = \"response:\".concat(payload.id);\n      } else if (utils_1.isInternalEvent(payload)) {\n        event = payload.event;\n      } else {\n        event = \"\";\n      }\n\n      if (event) {\n        eventEmitters = this._eventEmitters.filter(function (eventEmitter) {\n          return eventEmitter.event === event;\n        });\n      }\n\n      if ((!eventEmitters || !eventEmitters.length) && !utils_1.isReservedEvent(event) && !utils_1.isInternalEvent(event)) {\n        eventEmitters = this._eventEmitters.filter(function (eventEmitter) {\n          return eventEmitter.event === \"call_request\";\n        });\n      }\n\n      eventEmitters.forEach(function (eventEmitter) {\n        if (utils_1.isJsonRpcResponseError(payload)) {\n          var error = new Error(payload.error.message);\n          eventEmitter.callback(error, null);\n        } else {\n          eventEmitter.callback(null, payload);\n        }\n      });\n    }\n  }]);\n\n  return EventManager;\n}();\n\nexports.default = EventManager;","map":{"version":3,"sources":["../../src/events.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,IAAA,OAAA,GAAA,OAAA,CAAA,sBAAA,CAAA;;IAiBM,Y;AAGJ,0BAAA;AAAA;;AACE,SAAK,cAAL,GAAsB,EAAtB;AACD;;;;WAEM,mBAAU,YAAV,EAAqC;AAC1C,WAAK,cAAL,CAAoB,IAApB,CAAyB,YAAzB;AACD;;;WAEM,iBACL,OADK,EACsF;AAE3F,UAAI,aAAa,GAAoB,EAArC;AACA,UAAI,KAAJ;;AAEA,UAAI,OAAA,CAAA,gBAAA,CAAiB,OAAjB,CAAJ,EAA+B;AAC7B,QAAA,KAAK,GAAG,OAAO,CAAC,MAAhB;AACD,OAFD,MAEO,IAAI,OAAA,CAAA,wBAAA,CAAyB,OAAzB,KAAqC,OAAA,CAAA,sBAAA,CAAuB,OAAvB,CAAzC,EAA0E;AAC/E,QAAA,KAAK,sBAAe,OAAO,CAAC,EAAvB,CAAL;AACD,OAFM,MAEA,IAAI,OAAA,CAAA,eAAA,CAAgB,OAAhB,CAAJ,EAA8B;AACnC,QAAA,KAAK,GAAG,OAAO,CAAC,KAAhB;AACD,OAFM,MAEA;AACL,QAAA,KAAK,GAAG,EAAR;AACD;;AAED,UAAI,KAAJ,EAAW;AACT,QAAA,aAAa,GAAG,KAAK,cAAL,CAAoB,MAApB,CACd,UAAC,YAAD;AAAA,iBAAiC,YAAY,CAAC,KAAb,KAAuB,KAAxD;AAAA,SADc,CAAhB;AAGD;;AAED,UACE,CAAC,CAAC,aAAD,IAAkB,CAAC,aAAa,CAAC,MAAlC,KACA,CAAC,OAAA,CAAA,eAAA,CAAgB,KAAhB,CADD,IAEA,CAAC,OAAA,CAAA,eAAA,CAAgB,KAAhB,CAHH,EAIE;AACA,QAAA,aAAa,GAAG,KAAK,cAAL,CAAoB,MAApB,CACd,UAAC,YAAD;AAAA,iBAAiC,YAAY,CAAC,KAAb,KAAuB,cAAxD;AAAA,SADc,CAAhB;AAGD;;AAED,MAAA,aAAa,CAAC,OAAd,CAAsB,UAAC,YAAD,EAAgC;AACpD,YAAI,OAAA,CAAA,sBAAA,CAAuB,OAAvB,CAAJ,EAAqC;AACnC,cAAM,KAAK,GAAG,IAAI,KAAJ,CAAU,OAAO,CAAC,KAAR,CAAc,OAAxB,CAAd;AACA,UAAA,YAAY,CAAC,QAAb,CAAsB,KAAtB,EAA6B,IAA7B;AACD,SAHD,MAGO;AACL,UAAA,YAAY,CAAC,QAAb,CAAsB,IAAtB,EAA4B,OAA5B;AACD;AACF,OAPD;AAQD;;;;;;AAGH,OAAA,CAAA,OAAA,GAAe,YAAf","sourceRoot":"","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst utils_1 = require(\"@walletconnect/utils\");\r\nclass EventManager {\r\n    constructor() {\r\n        this._eventEmitters = [];\r\n    }\r\n    subscribe(eventEmitter) {\r\n        this._eventEmitters.push(eventEmitter);\r\n    }\r\n    trigger(payload) {\r\n        let eventEmitters = [];\r\n        let event;\r\n        if (utils_1.isJsonRpcRequest(payload)) {\r\n            event = payload.method;\r\n        }\r\n        else if (utils_1.isJsonRpcResponseSuccess(payload) || utils_1.isJsonRpcResponseError(payload)) {\r\n            event = `response:${payload.id}`;\r\n        }\r\n        else if (utils_1.isInternalEvent(payload)) {\r\n            event = payload.event;\r\n        }\r\n        else {\r\n            event = \"\";\r\n        }\r\n        if (event) {\r\n            eventEmitters = this._eventEmitters.filter((eventEmitter) => eventEmitter.event === event);\r\n        }\r\n        if ((!eventEmitters || !eventEmitters.length) &&\r\n            !utils_1.isReservedEvent(event) &&\r\n            !utils_1.isInternalEvent(event)) {\r\n            eventEmitters = this._eventEmitters.filter((eventEmitter) => eventEmitter.event === \"call_request\");\r\n        }\r\n        eventEmitters.forEach((eventEmitter) => {\r\n            if (utils_1.isJsonRpcResponseError(payload)) {\r\n                const error = new Error(payload.error.message);\r\n                eventEmitter.callback(error, null);\r\n            }\r\n            else {\r\n                eventEmitter.callback(null, payload);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.default = EventManager;\r\n//# sourceMappingURL=events.js.map"]},"metadata":{},"sourceType":"script"}